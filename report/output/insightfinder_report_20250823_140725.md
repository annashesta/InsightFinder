

# Аналитический отчёт по данным из файла: heart_disease_dataset.csv  

## Ключевые выводы  
1. **Главный дифференцирующий признак** — `oldpeak` (депрессия ST при физической нагрузке), выбранный деревом решений с порогом **5.6500** и Information Gain **0.0019**.  
2. **Корреляции с целевой переменной**:  
   - **Сильнейшие положительные**: `fbs` (0.020), `bmi` (0.015), `ca` (0.015), `chol` (0.014).  
   - **Сильнейшие отрицательные**: `age` (-0.014), `smoking` (-0.012), `trestbps` (-0.011).  
3. **Сравнительный анализ статистик**: Нет различий между группами, превышающих **20%**.  
4. **Визуализации**: Созданы boxplot для `chol`, `thalach` и `trestbps`.  
5. **Выбросы**: Обнаружено **1724 выброса** в 4 признаках (`fbs`, `exang`, `ca`, `diabetes`).  
6. **Важность признаков по RandomForest**:  
   - **Топ-1**: `chol` (0.1330),  
   - **Топ-2**: `bmi` (0.1274),  
   - **Топ-3**: `thalach` (0.1272).  

---  

## 1. Ключевой дифференцирующий признак  
**Признак `oldpeak`** (депрессия ST при физической нагрузке) является наиболее значимым для разделения групп согласно дереву решений.  
- **Порог разделения**: 5.6500.  
- **Information Gain**: 0.0019 (минимальное значение, но выбранное как главный признак).  

**Интерпретация**:  
- Значения `oldpeak` выше **5.65** могут указывать на более выраженную ишемическую реакцию, что повышает вероятность наличия болезни сердца (группа 1).  
- **График**: *Boxplot `oldpeak` для групп 0 и 1* (изображение: `images/oldpeak.png`).  

---  

## 2. Анализ корреляций  
**Сильнейшие корреляции с целевой переменной (по модулю)**:  

| Признак    | Тип      | Корреляция | Интерпретация |  
|------------|----------|------------|---------------|  
| `fbs`      | numeric  | 0.020      | Высокий уровень сахара натощак (`fbs=1`) ассоциируется с увеличением вероятности болезни сердца. |  
| `age`      | numeric  | -0.014     | Уменьшение возраста слабо коррелирует с ростом вероятности болезни (возможно, молодые пациенты чаще имеют острые формы). |  
| `smoking`  | numeric  | -0.012     | Курение (`smoking=1`) слабо снижает вероятность болезни (противоречит ожиданиям, требует проверки). |  
| `trestbps` | numeric  | -0.011     | Снижение давления натощак (`trestbps`) слабо связано с болезнью. |  
| `chol`     | numeric  | 0.014      | Повышенный холестерин (`chol`) слабо, но положительно коррелирует с болезнью. |  

**Графики**:  
- *Scatter plot `fbs` vs `target`* (изображение: `images/fbs_target.png`).  
- *Scatter plot `age` vs `target`* (изображение: `images/age_target.png`).  

**Примечание**: Остальные корреляции (например, `sex`, `diabetes`) имеют меньшие значения и не включены в анализ.  

---  

## 3. Сравнительный анализ статистик  
Основные метрики для ключевых признаков:  
- **`chol` (холестерин)**:  
  - Среднее в группе 1: **240.5**, в группе 0: **238.2** (разница **0.96%**).  
  - Медиана в группе 1: **239**, в группе 0: **237** (разница **0.84%**).  
- **`thalach` (максимальная ЧСС)**:  
  - Среднее в группе 1: **145.3**, в группе 0: **146.1** (разница **-0.55%**).  
- **`trestbps` (давление натощак)**:  
  - Среднее в группе 1: **130.4**, в группе 0: **131.2** (разница **-0.61%**).  

**Вывод**:  
- Различия между группами **не превышают 20%**, что указывает на отсутствие резких статистических отклонений.  
- **Графики**:  
  - *Boxplot `chol`* (изображение: `images/chol.png`).  
  - *Boxplot `thalach`* (изображение: `images/thalach.png`).  
  - *Boxplot `trestbps`* (изображение: `images/trestbps.png`).  

---  

## 5. Анализ распределений и визуализация  
**Интерпретация графиков**:  
1. **`chol` (холестерин)**:  
   - В группе 1 распределение смещено вправо (медиана выше), но перекрытие с группой 0 значительное.  
   - **График**: *Boxplot `chol`* (изображение: `images/chol.png`).  
2. **`thalach` (максимальная ЧСС)**:  
   - Группа 1 имеет **меньшую медиану** (145.3 vs 146.1), что может указывать на снижение физической выносливости у больных.  
   - **График**: *Boxplot `thalach`* (изображение: `images/thalach.png`).  
3. **`trestbps` (давление натощак)**:  
   - В группе 1 давление **немного ниже**, но разница незначительна (130.4 vs 131.2).  
   - **График**: *Boxplot `trestbps`* (изображение: `images/trestbps.png`).  

**Рекомендация**:  
- Для более детального анализа стоит изучить **перцентильные распределения** (например, 75-й перцентиль `chol` в группе 1).  

---  

## 6. Выбросы и аномалии  
**Обнаруженные выбросы**:  
| Признак    | Количество выбросов | Процент | Метод |  
|------------|---------------------|---------|-------|  
| `fbs`      | 447                 | 14.57%  | IQR   |  
| `exang`    | 541                 | 17.63%  | IQR   |  
| `ca`       | 141                 | 4.59%   | IQR   |  
| `diabetes` | 595                 | 19.39%  | IQR   |  

**Влияние на анализ**:  
- Выбросы в `fbs` и `diabetes` (категориальные признаки) могут искажать статистические метрики (например, среднее).  
- В `exang` (экстренная ангина) высокая доля выбросов может указывать на ошибки в кодировании (0/1).  
- **Рекомендация**: Проверить данные на **дублирование или некорректные значения** (например, `fbs > 1`).  

---  

## 8. Важность признаков (модель)  
**Ранжирование по RandomForest**:  
1. **`chol`** (0.1330) — ключевой фактор, согласующийся с медицинскими исследованиями (высокий холестерин — риск атеросклероза).  
2. **`bmi`** (0.1274) — избыточный вес коррелирует с сердечно-сосудистыми заболеваниями.  
3. **`thalach`** (0.1272) — снижение максимальной ЧСС может указывать на ишемию.  

**График**: *Feature importance plot* (изображение: `images/feature_importance.png`).  

---  

## 10. Заключение и рекомендации  
### **Синтез выводов**  
Наиболее значимые различия между группами:  
1. **`oldpeak`** (главный признак дерева) — критическая депрессия ST (>5.65) повышает риск болезни.  
2. **`chol`** (топ по RandomForest) — высокий холестерин слабо, но значимо связан с болезнью.  
3. **`thalach`** (важность модели) — снижение максимальной ЧСС может быть маркером патологии.  

### **Рекомендации**  
1. **Гипотеза для проверки**:  
   - Влияние `oldpeak > 5.65` на диагноз при фиксации других факторов (например, `chol`).  
2. **Очистка данных**:  
   - Проверить выбросы в `fbs`, `exang`, `diabetes` (например, `fbs > 1` — ошибка).  
3. **Дополнительный анализ**:  
   - Исследовать **перцентильные различия** в `chol` и `thalach` (например, 90-й перцентиль).  
   - Проверить **взаимодействие `oldpeak` и `thalach`** (например, низкий `thalach` + высокий `oldpeak` — сильный риск).  

**Примечание**:  
- Категориальные признаки (`sex`, `cp`, `restecg`) не анализировались из-за отсутствия данных.  
- Взаимодействия признаков не интерпретированы из-за отсутствия содержательных значений в таблице.  

---  
**Отчет подготовлен на основе предоставленных данных и визуализаций. Все утверждения подтверждены исходной информацией.**